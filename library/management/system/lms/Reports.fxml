<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.chart.BarChart?>
<?import javafx.scene.chart.CategoryAxis?>
<?import javafx.scene.chart.NumberAxis?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>

<BorderPane maxHeight="1024" maxWidth="1440" minHeight="600" minWidth="800" prefHeight="800" prefWidth="1200" xmlns="http://javafx.com/javafx/8.0.171" xmlns:fx="http://javafx.com/fxml/1" fx:controller="library.management.system.lms.ReportsController">
    
    <!-- Left Sidebar -->
    <left>
        <VBox prefHeight="740.0" prefWidth="230.0" spacing="20" style="-fx-background-color: #34495E;">
            <padding>
                <Insets bottom="30" left="20" right="20" top="30" />
            </padding>
            <Label style="-fx-text-fill: white; -fx-font-size: 22px; -fx-font-weight: bold;" text="📚 Library" />
            <VBox prefHeight="266.0" prefWidth="190.0" spacing="10" style="-fx-background-color: #2C3E50; -fx-background-radius: 5; -fx-padding: 15;">
                <Button fx:id="dashboardButton" onAction="#handleNavigation" prefWidth="180" style="-fx-background-color: transparent; -fx-text-fill: white; -fx-alignment: CENTER_LEFT;" text="Dashboard" />
                <Button fx:id="readerManagementButton" onAction="#handleNavigation" prefWidth="180" style="-fx-background-color: transparent; -fx-text-fill: white; -fx-alignment: CENTER_LEFT;" text="Reader Management" />
                <Button fx:id="bookManagementButton" onAction="#handleNavigation" prefWidth="180" style="-fx-background-color: transparent; -fx-text-fill: white; -fx-alignment: CENTER_LEFT;" text="Book Management" />
                <Button fx:id="reportsButton" onAction="#handleNavigation" prefWidth="180" style="-fx-background-color: #3498DB; -fx-text-fill: white; -fx-alignment: CENTER_LEFT;" text="Reports" />
                <Button fx:id="settingsButton" onAction="#handleNavigation" prefWidth="180" style="-fx-background-color: transparent; -fx-text-fill: white; -fx-alignment: CENTER_LEFT;" text="Settings" />
            </VBox>
        </VBox>
    </left>
    
    <!-- Top Header -->
    <top>
        <HBox alignment="CENTER_RIGHT" prefHeight="60" spacing="15" style="-fx-background-color: #ECF0F1; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 6, 0, 0, 2);">
            <padding>
                <Insets bottom="15" left="20" right="20" top="15" />
            </padding>
            <Label fx:id="adminNameLabel" style="-fx-text-fill: #2C3E50; -fx-font-size: 16px; -fx-font-weight: bold;" styleClass="admin-name" text="Welcome Back, Admin">
                <padding>
                    <Insets right="10" />
                </padding>
            </Label>
              <ImageView fx:id="profilePic" fitHeight="33" fitWidth="26" preserveRatio="true">
                  <image>
                      <Image url="@../../../../img/account_circle_48dp_000000_FILL1_wght400_GRAD0_opsz48.png" />
                  </image>
              </ImageView>
        </HBox>
    </top>
    
    <!-- Center - Reports Content -->
    <center>
<!--        <VBox alignment="TOP_CENTER" prefHeight="500.0" prefWidth="600.0" spacing="20" styleClass="reports-center">
            <Label styleClass="reports-title" text="Reports" />
            
             Line Chart: Books Borrowed Over Time 
            <LineChart fx:id="borrowTrendChart" prefHeight="300" prefWidth="600" styleClass="reports-chart">
                <xAxis>
                    <CategoryAxis label="Month" />
                </xAxis>
                <yAxis>
                    <NumberAxis label="Books Borrowed" />
                </yAxis>
            </LineChart>
            
             Summary Metrics Section 
            <HBox alignment="CENTER" spacing="40">
                <VBox alignment="CENTER" spacing="10">
                    <Label styleClass="reports-metric" text="Total Books:" />
                    <Label styleClass="reports-metric-value" text="500" />
                </VBox>
                <VBox alignment="CENTER" spacing="10">
                    <Label styleClass="reports-metric" text="Borrowed Books:" />
                    <Label styleClass="reports-metric-value" text="120" />
                </VBox>
                <VBox alignment="CENTER" spacing="10">
                    <Label styleClass="reports-metric" text="Overdue Books:" />
                    <Label styleClass="reports-metric-value" text="15" />
                </VBox>
            </HBox>
        </VBox>-->
        
       <VBox alignment="CENTER" spacing="10">
    <Label styleClass="chart-title" text="📊 Library Report" />

    <HBox spacing="20">
        <VBox>
            <Label fx:id="totalBorrowedLabel" text="📚 Total Books Borrowed: ..." />
            <Label text="🔥 Most Borrowed Books:" />
            <VBox fx:id="mostBorrowedBooksBox" />
        </VBox>
        <VBox>
            <Label text="🏆 Most Active Members:" />
            <VBox fx:id="mostActiveMembersBox" />
        </VBox>
    </HBox>

    <BarChart fx:id="borrowedBooksChart">
    <xAxis>
        <CategoryAxis label="Book Title" fx:id="xAxis" />
    </xAxis>
    <yAxis>
        <NumberAxis fx:id="yAxis" label="Times Borrowed" />
    </yAxis>
</BarChart>
</VBox>


    </center>
    
</BorderPane>
